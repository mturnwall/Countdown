/**
*   @class Countdown Object
*   @version 1.2
*   @description handles counting down from today's date to a date in future
*   @requires jQuery v1.3 or later
*   @author Michael Turnwall
*   
*   <p>Copyright (c) 2011 Michael Turnwall</p>
*   <p>Released under a GPLv3 license.</p>
*   <p>This program is free software: you can redistribute it and/or modify
*   it under the terms of the GNU General Public License as published by
*   the Free Software Foundation, either version 3 of the License, or
*   (at your option) any later version.</p>
*   
*   <p>This program is distributed in the hope that it will be useful,
*   but WITHOUT ANY WARRANTY; without even the implied warranty of
*   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
*   GNU General Public License for more details.</p>
*   
*   <p>You should have received a copy of the GNU General Public License
*   along with this program.  If not, see <http://www.gnu.org/licenses/>.</p>
*/
var Countdown={getTimeDifference:function(a){var b,c,d,e,f;b=86400000;c=3600000;d=60000;e=1000;a=a.length<4?new Date(a[0],a[1],a[2]):new Date(a[0],a[1],a[2],a[3],a[4]);f=new Date;a=a.getTime()-(f.getTime()-this.findTimezone());this.timeValues.days=a>=b?Math.floor(a/b):0;this.timeValues.hours=Math.floor(a%b/c);this.timeValues.mins=Math.floor(a%b%c/d);this.timeValues.seconds=Math.ceil(a%b%c%d/e)},startTimeCounter:function(a){this.getTimeDifference(a);if(this.timeValues.hours){a=this.timeValues.hours*
60;this.timeValues.mins+=a}},findTimezone:function(){var a;a=new Date;a=a.getTimezoneOffset();if(a==this.pacificOffset)return 0;a=a<0?a*-1+this.pacificOffset:a<this.pacificOffset?this.pacificOffset-a:this.pacificOffset+a;return a*1000*60},countTime:function(){var a=this.timeValues.days,b=this.timeValues.hours,c=this.timeValues.mins,d=this.timeValues.seconds;if(d>0)d--;else if(d==0&&c>0){d=59;c--}else if(d==0&&c==0&&b>0){if(c==0&&b>0)c=d=59;if(b>1)b--;else if(b==1&&a>0){b=0;a--}else b=0}a={days:a>=
0?a:0,hours:b>=0?b:0,mins:c>=0?c:0,seconds:d>=0?d:0};for(var e in a)this.timeValues[e]=a[e];this.writeTime(a)},writeTime:function(a){var b=this;this.$_timeContainers.each(function(){var c=this.parentNode.className.match(/days|hours|mins|seconds/)[0];if(a[c]>=0)a[c].toString().length>1?(this.innerHTML=a[c]):(this.innerHTML="0"+a[c])});if(a.days!=0||a.hours!=0||a.mins!=0||a.seconds!=0)this.timer=window.setTimeout(function(){b.countTime()},1000);else return window.location.reload()},init:function(a){this.$_timeContainers=
$(".timerCont .timeValue span");if(a.eventStatus){$(".timerCont").html(a.eventStatus);return true}this.timeValues=[];this.pacificOffset=(this.dst=typeof a.dst=="undefined"?false:a.dst)?420:480;a.levelTimer?this.startTimeCounter(a.eventDate):this.getTimeDifference(a.eventDate);this.writeTime(this.timeValues)}};
